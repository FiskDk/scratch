<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <style>
        body {
           background-color: #121212;
        }
        .splash {
            color: white;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: xx-large;
            font-weight: bolder;
            margin: 0;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
    <script>
        global.__toggleDevTools = function(){
                        const currentWebContents = require('electron').remote.getCurrentWebContents();
                currentWebContents.openDevTools();
}
        //Important functions i guess?
        const waitUntilElementExists = (selector, callback) => {
    const el = document.querySelector(selector);
    
    if (el){
        return callback(el);
    }
    
    setTimeout(() => waitUntilElementExists(selector, callback), 500);
    }
 
   //Inject Scratch++ code
waitUntilElementExists(".menu-bar_scratch-logo_7D20g", function main(){
    //Scratch has loaded, now inject the custom logo, and the custom darkmode theme
    const fs = require("fs")
    const os = require("os")
document.getElementsByClassName("menu-bar_scratch-logo_7D20g menu-bar_clickable_26k4z")[0].parentElement.innerHTML = '<a style="text-align: center; color:white" href="javascript:__toggleDevTools()">Scratch++</a>'
console.log("Scratch++ has loaded");
console.log("[Scratch++] Loading plugin loader...")
fs.readFile("C:/Users/" + os.userInfo().username + "/AppData/Local/Programs/Scratch Desktop/resources/plugins/loader.js", 'utf8', function (err,data) {
  if (err) {
    return console.log(err);
  }
  eval(data)
});
console.log("[Scratch++] PluginLoader finished all tasks")
})

</script>
<script>require("source-map-support/source-map-support.js").install()</script></head>
<body>
    <div id="app">
        <img class="center" src="scratch.png" width="256px" height="256px" style="margin: 0 auto;display: block;margin-top: 30px">
        <p class="splash">Scratch++ by f1sk</p>
              
    </div>
<script src="renderer.js"></script></body>
</html>
